<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Slideshow Display</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            overflow: hidden;
        }
        .slideshow-container {
            position: relative;
            width: 90%;
            max-width: 1600px;
            height: 90%;
            max-height: 900px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            background-color: #fff;
        }
        .slideshow-track {
            display: flex;
            gap: 20px;
            transition: transform 1s ease;
        }
        .slide {
            min-width: 33%;
            transition: transform 0.5s ease;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .slide img {
            width: auto;
            height: 100%;
            object-fit: cover;
        }
        .instagram-handle {
            margin-top: 20px;
            font-size: 1.5em;
            color: #333;
            font-family: Arial, sans-serif;
        }
    </style>
</head>
<body>
    <div class="slideshow-container">
        <div class="slideshow-track" id="slideshow-track">
            <!-- Images will be added here dynamically -->
        </div>
    </div>
    <div class="instagram-handle" id="instagram-handle">@user</div>
    <script>
        async function fetchInstagramPhotos() {
            const accessToken = "INSTAGRAM_GRAPH_API_ACCESS_TOKEN"; 
            const userId = "INSTAGRAM_USER_ID"; 
            const mediaUrl = `https://graph.instagram.com/v17.0/${userId}/media?fields=id,media_type,media_url,caption&access_token=${accessToken}`;
            const userUrl = `https://graph.instagram.com/${userId}?fields=username&access_token=${accessToken}`;
            
            try {
                // Fetch username
                const userResponse = await fetch(userUrl);
                if (!userResponse.ok) {
                    throw new Error(`Error fetching username: ${userResponse.status} ${userResponse.statusText}`);
                }
                const userData = await userResponse.json();
                document.getElementById('instagram-handle').textContent = `@${userData.username}`;

                // Fetch media
                const response = await fetch(mediaUrl);
                if (!response.ok) {
                    throw new Error(`Error fetching media: ${response.status} ${response.statusText}`);
                }
                const data = await response.json();
                const images = data.data.filter(item => item.media_type === 'IMAGE' || item.media_type === 'CAROUSEL_ALBUM');
                const slideshowTrack = document.getElementById('slideshow-track');

                images.forEach((image, index) => {
                    const slideDiv = document.createElement('div');
                    slideDiv.classList.add('slide');
                    const imgElement = document.createElement('img');
                    imgElement.src = image.media_url;
                    imgElement.alt = `Image ${index + 1}`;
                    slideDiv.appendChild(imgElement);
                    slideshowTrack.appendChild(slideDiv);
                });
            } catch (error) {
                console.error('Error fetching Instagram photos:', error);
                alert('An error occurred while fetching Instagram photos. Please check the console for details.');
            }
        }

        fetchInstagramPhotos();

        const track = document.getElementById('slideshow-track');
        let index = 0;

        function moveSlides() {
            index++;
            if (index >= track.children.length) {
                index = 0;
            }
            track.style.transform = `translateX(-${index * (100 / 3 + 1)}%)`;
        }

        setInterval(moveSlides, 3000);
    </script>
</body>
</html>
